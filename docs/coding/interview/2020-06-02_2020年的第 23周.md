---
category: 编程
tags:
  - javascript 周记
date: 2020-06-02
title: 周记 - 2020年的第 23 周
---

### == ===

```js
const a = [1,2,3],
b = [1,2,3],
c= [1,2,4],
d = "2",
e = "11";
console.log([a == b, a===b, a > c, a < c, d > e])
```

结果：
[ false, false, false, true, true ]

解释：

1. JavaScript 有两种比较方式： 严格比较运算符和转换类型比较运算符。

对于严格比较运算符（===）来说， 仅当两个操作数的类型相同且等于true, 而对于被广泛使用的比较运算符（==）来说，会在进行比较之前，将两个操作数转换成相同的类型。对于关系运算符（比如<=）来说，会先将操作数转为原始值，使它们类型相同，再进行比较运算。

2. 当两个操作数是对象时，JavaScript会比较其内部引用，当且仅当他们的引用指向内存中的相同对象（区域）时才相等，即他们在栈内存中给的引用地址相同。

javascript中Array也是对象，所以这里a，b，c显然引用时不相同的，所以这里 a==b, a===b 都为false

3. 两个数组进行大小比较，也就是两个对象进行比较

当两个对象进行比较时，会转化为原始类型的值，再进行比较。对象转换为原始类型的值，算法时先调用**valueOf**方法；如果返回的还是对象，再接着调用**toString()**方法

* valueOf() 方法返回指定对象的原始值
    JavaScrit调用valueOf()方法将对象转换为原始值，你很少需要自己调用valueOf方法；当遇到要预期的原始值对象时，Javascript会自动调用它。默认情况下，valueOf方法由Object后面的每个对象继承。每个内置的对象都会覆盖此方法以返回适当的值。如果对象没有原始值，则value将返回对象本身。

* toString() 方法放回一个标识对象的字符
    每个对象都有一个toString()方法，当该对象表示为一个文本值时，或者一个对象以预期的字符串方式引用时自动调用。默认情况下，toString() 方法被每个Object对象继承。如果此方法在定义对象中未被覆盖，toString()返回"[Object type]", 其中type是对象的类型。

* 两个字符进行大小比较
    上边的数组经转换为字符串之后，接着进行大小比较。
    MDN中描述是这样的：字符串比较则是使用基于标准字典 Unicode值进行比较的。
    
    字符串按照字典顺序比较。Javascript引擎内部首先比较should字符的Unicode码点，如果相等，在比较第二个字符的Unicode码点，以此类推。

    所以这里 "1,2,3" < "1,2,4" 输出是true， 因为前边字符的unicode码点都相等，所以最后比较是3，4 uniconde码点。而3的码点是51，4是52，所以 a<c

    "2" > "11"也是同理


