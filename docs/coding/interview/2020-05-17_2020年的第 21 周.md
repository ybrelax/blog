---
category: 编程
tags:
  - javascript
date: 2020-05-17
title: 周记 - 2020年的第 21 周
---

### == 和 ===

==用于一般比较，===用于严格比较，==在比较的时候可以转换数据类型，===严格比较，只要类型不匹配就返回 flase。

先来看看 == 这兄弟：

强制是将值转换为另一种类型的过程。在这种情况下，==会执行隐式强制。在比较两个值之前，==需要执行一些规则。

假设我们要比较 x == y 的值。

- 如果 x 和 y 的类型相同，则 JS 会换成===操作符进行比较。
- 如果 x 为 null, y 为 undefined，则返回 true。
- 如果 x 为 undefined 且 y 为 null，则返回 true。
- 如果 x 的类型是 number, y 的类型是 string，那么返回 x == toNumber(y)。
- 如果 x 的类型是 string, y 的类型是 number，那么返回 toNumber(x) == y。
- 如果 x 为类型是 boolean，则返回 toNumber(x)== y。
- 如果 y 为类型是 boolean，则返回 x == toNumber(y)。
- 如果 x 是 string、symbol 或 number，而 y 是 object 类型，则返回 x == toPrimitive(y)。
- 如果 x 是 object，y 是 string，symbol 则返回 toPrimitive(x) == y。
- 剩下的 返回 false
  注意：toPrimitive 首先在对象中使用 valueOf 方法，然后使用 toString 方法来获取该对象的原始值。

举个例子。

| x                 |     y     | x == y |
| :---------------- | :-------: | -----: |
| 5                 |     5     |   true |
| 1                 |    '1'    |   true |
| null              | undefined |   true |
| 0                 |   false   |   true |
| '1,2'             |   [1,2]   |   true |
| '[object Object]' |    {}     |   true |

这些例子都返回 true。

第一个示例符合条件 1，因为 x 和 y 具有相同的类型和值。

第二个示例符合条件 4，在比较之前将 y 转换为数字。

第三个例子符合条件 2。

第四个例子符合条件 7，因为 y 是 boolean 类型。

第五个示例符合条件 8。使用 toString()方法将数组转换为字符串，该方法返回 1,2。

最后一个示例符合条件 8。使用 toString()方法将对象转换为字符串，该方法返回[object Object]。

| x                 |     y     | x == y |
| :---------------- | :-------: | -----: |
| 5                 |     5     |   true |
| 1                 |    '1'    |  false |
| null              | undefined |  false |
| 0                 |   false   |  false |
| '1,2'             |   [1,2]   |  false |
| '[object Object]' |    {}     |  false |

如果使用===运算符，则第一个示例以外的所有比较将返回 false，因为它们的类型不同，而第一个示例将返回 true，因为两者的类型和值相同。
