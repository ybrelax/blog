---
category: 前端
tags:
  - webpack
date: 2020-03-25
title: webpack进阶篇
---

上章介绍了 webpack 基础篇，这章然我们继续深入;

<!--more-->

## 静态资源拷贝

如果我们在 index.html 中引入了本地的 js 文件，那么如何在打包的时候才能把它正确的引入进去呢？

```sh
|--public
|   |--index.html
|   |--js
|   |   |--index.js
|   |   |--other.js
```

那么这种情况，可以通过拷贝的形式放进打包目录，但是这是最不靠谱的方式，所以我们需要用到

```sh
npm install copy-webpack-plugin -D
```

webpack.config.js:

```js
new CopyWebpackPlugin(
  [
    {
      from: "public/js/*.js",
      to: path.resolve(__dirname, "dist", "js"),
      flatten: true
    }
  ],
  {
    ignore: ["other.js"]
  }
);
```

- flatten 设置为 true 是只拷贝文件，否则的话就连文件夹一起拷贝
- ignore 过滤掉不拷贝的文件

## ProvidePlugin 全局引入

作为 webpack 的内部插件，这个插件能帮助我们全局引入变量。

```js
new webpack.ProvidePlugin({
  identifier1: "module1",
  identifier2: ["module2", "property2"]
});
```

在 vue 或者 react 中我们不需要在每个组件中频繁的引入，所以可以这样

```js
new webpack.ProvidePlugin({
  React: "react",
  Component: ["react", "Component"], // 这种的默认导出为 module.exports
  Vue: ["vue/dist/vue.esm.js", "default"], // 这个地方加default，是因为默认导出的形式 export default
  $: "jquery",
  _map: ["lodash", "map"]
});
```

这样我们就可以在项目中使用 react, vue 这些变量了。

## 抽离css

前面基础篇中打包实际上把css文件和在了js文件。实际开发中，css文件也是非常大的。所以最好把他抽离出来。
